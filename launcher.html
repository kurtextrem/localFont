<!--

localFont's loading script and noscript fallback
================================================

If you want to make any improvements, please submit a pull request.

Originally by Smashing Magazine: https://gist.github.com/hdragomir/8f00ce2581795fd7b1b7

-->

<script type="text/javascript">
!function (window) {
    'use strict'

    /*!
     * Increase on FontAwesome change.
     */
    var fontVersion = 4

    var document = window.document,
        localStorage = function (t) {
            try {
                window.localStorage.setItem(t, t)
                return window.localStorage
            } catch (e) {
                return {}
            }
        }('t'),
        url = 'css/fontawesome/fontawesome-'

    var nua = navigator.userAgent,
        mobile = /(Android (2|3|4.0|4.1|4.2|4.3))|(Opera (Mini|Mobi))/.test(nua) !== false, // we ignore old iPhones (<=4.1), as those only support SVG webfonts and have a global market share of 0%
        ie8 = !window.addEventListener, // IE8 and below
        oldAndroid = mobile && nua.indexOf('Chrome') === -1 // Android Stock Browser below 4.4 and Opera Mini to deliver ttf

    if (ie8) return; // loads .eot via IE special conditions

    // if we have the font in localStorage
    if (localStorage.fontVersion == fontVersion)
        return injectFontsStylesheet(localStorage.fontCSSCache) // ...we use it

    // only supports ttf
    if (oldAndroid)
        url += 'ttf'
    else
        url += 'woff' // woff support is great

    if (supportsWoff2())
        url += '2' // woff2

    // once cached, the css file is stored on the client forever unless
    // the URL below is changed. Any change will invalidate the cache.
    url += '.css?' + fontVersion

    // we don't have a cache
    injectFontsStylesheet(false)

    // time to get the actual css file
    function injectFontsStylesheet(cache) {
        // use the cached version if we already have it
        if (cache)
            return injectRawStyle(cache)

        // otherwise, load it with ajax
        var xhr = new XMLHttpRequest()
        xhr.open('GET', url, true)
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // once we have the content, quickly inject the css rules
                injectRawStyle(xhr.responseText)
                // and cache the text content for further use
                // notice that this overwrites anything that might have already been previously cached
                localStorage.fontCSSCache = xhr.responseText
                localStorage.fontVersion = fontVersion
            }
        }
        xhr.send()
    }

    // this is the simple utitily that injects the cached or loaded css text
    function injectRawStyle(text) {
        var style = document.createElement('style')
        style.setAttribute('type', 'text/css')
        // add the style element to the DOM before adding styles to it to prevent browser crashes
        document.getElementsByTagName('head')[0].appendChild(style)
        if (style.styleSheet) {
            return style.styleSheet.cssText = text
        }
        style.innerHTML = text
    }

    function supportsWoff2() {
        // Source: https://github.com/filamentgroup/woff2-feature-test
        if (!window.FontFace || typeof window.FontFace !== 'function') return false;

        var f = new window.FontFace('t', 'url("data:application/font-woff2;base64,d09GMgABAAAAAAIkAAoAAAAABVwAAAHcAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABlYAgloKLEoBNgIkAxgLDgAEIAWDcgc1G7IEyB6SJAFID5YA3nAHC6h4+H7s27nP1kTyOoQkGuJWtNGIJKYznRI3VEL7IaHq985ZUuKryZKcAtJsi5eULwUybm9KzajBBhywZ5ZwoJNuwDX5C/xBjvz5DbsoNsvG1NGQiqp0NMLZ7JlnW+5MaM3HwcHheUQeiVokekHkn/FRdefvJaTp2PczN+I1Sc3k9VuX51Tb0Tqqf1deVXGdJsDOhz0/EffMOPOzHNH06pYkDDjs+P8fb/z/8n9Iq8ITzWywkP6PBMMN9L/O7vY2FNoTAkp5PpD6g1nV9WmyQnM5uPpAMHR2fe06jbfvzPriekVTQxC6lpKr43oDtRZfCATl5OVAUKykqwm9o8R/kg37cxa6eZikS7cjK4aIwoyh6jOFplhFrz2b833G3Jii9AjDUiAZ9AxZtxdEYV6imvRF0+0Nej3wu6nPZrTLh81AVcV3kmMVdQj6Qbe9qetzbuDZ7vXOlRrqooFSxCv6SfrDICA6rnHZXQPVcUHJYGcoqa3jVH7ATrjWBNYYkEqF3RFpVIl0q2JvMOJd7/TyjXHw2NyAuJpNaEbz8RTEVtCbSH7JrwQQOqwGl7sTUOtdBZIY2DKqKlvOmPvUxJaURAZZcviTT0SKHCXqzwc=") format("woff2")', {});
        f.load()['catch'](function () {});

        return f.status == 'loading' || f.status == 'loaded';
    }
}(window);
</script>
<noscript>
  <link rel="stylesheet" href="/font.css">
</noscript>
